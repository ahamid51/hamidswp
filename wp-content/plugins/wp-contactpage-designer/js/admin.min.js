function CPD(){var CPD=this;CPD.tmpname=null;CPD.baseurl=null;CPD.ajaxUrl=null;CPD.isElementMove=false;this.init=function(params){CPD.baseurl=params.baseurl;CPD.ajaxUrl=params.ajaxUrl;CPD.handles();CPD.ToolsIntercation();CPD.WorkflowIntercation();CPD.saveTemplate();CPD.selectTemplate();CPD.makeDefault();CPD.editTemplate();jQuery('.ElementEditor .colorPalette').ColorPicker({eventName:'click',onSubmit:function(hsb,hex,rgb,el){jQuery(el).prev().val('#'+hex)}})}this.purchasePremium=function(){tb_show('Purchase premium version','#TB_inline?width=500&height=200&inlineId=purchase-box')}this.handles=function(){jQuery('.SelectTemplate').draggable({handle:'.SelectTemplate h4',containment:'.CPD .Main'});jQuery('.TemplateProperties').draggable({handle:'.TemplateProperties h4',containment:'.CPD .Main'});jQuery('.CPD .Toolbar').draggable({handle:'#Toolbar_move_handle',containment:'.CPD .Main'});jQuery('#Toolbar_move_handle').dblclick(function(){jQuery(this).parent().find('ul.ToolsList').toggle()});jQuery('.CPD .Workflow').draggable({handle:'#Workflow_move_handle',containment:'.CPD .Main'});jQuery('.CPD .Workflow_Wrapper').resizable({handles:'se,s,e',minWidth:70,minHeight:20,start:function(){jQuery('#Workflow_resize_coords').fadeIn()},resize:function(event,ui){var x=Math.round(jQuery(this).outerWidth());var y=Math.round(jQuery(this).outerHeight());jQuery('#Workflow_resize_coords').text(x+'px : '+y+'px');jQuery('#Workflow_resize_coords').css({left:jQuery(this).outerWidth()/2-jQuery('#Workflow_resize_coords').outerWidth()/2,top:jQuery(this).outerHeight()/2-jQuery('#Workflow_resize_coords').outerHeight()/2})},stop:function(){jQuery('#Workflow_resize_coords').fadeOut()}});jQuery('.CPD #Fullscreen').click(function(){if(jQuery('.CPD .Main').css('position')=='absolute'){jQuery('.CPD .Main').css({width:'inherit',minHeight:'600px',position:'relative',zIndex:'1'})}else{jQuery('.CPD .Main').css({width:'100%',height:'100%',position:'absolute',top:0,left:0,zIndex:'10000'})}})}this.WorkflowIntercation=function(){jQuery('.Workflow_Wrapper').click(function(e){e.stopPropagation();jQuery(this).find('.elementTools').hide()});jQuery('.BlackBox').click(function(){jQuery(this).hide();jQuery('.SelectTemplate').hide();jQuery('.TemplateProperties').hide();jQuery('.ElementEditor > div').hide();jQuery('.ElementEditor > h4').hide();jQuery('.ElementEditor').hide()})}this.ToolsIntercation=function(){jQuery('.CPD .ElementEditor h4 span').live('click',function(){jQuery('.BlackBox').hide();jQuery('.ElementEditor').hide();jQuery('.ElementEditor > div').hide();jQuery('.ElementEditor > h4').hide()});jQuery('.CPD .ElementEditor').draggable({containment:'window',handle:'h4'});jQuery('ul.ToolsList').sortable({helper:'clone',revert:'invalid',containment:'.CPD .Main',items:"li:not(.disable)"});jQuery('ul.ToolsList li.disable').mousedown(function(){CPD.purchasePremium()});jQuery('.Workflow_Wrapper').droppable({accept:".ToolsList li",drop:function(event,ui){var wPos=jQuery('.Workflow_Wrapper ul').offset();var pos=jQuery(ui.helper).offset();var y=pos.top-wPos.top;var x=pos.left-wPos.left;var createElement;switch(ui.draggable.attr('id')){case'createParagraph':createElement='<p>New Paragraph</p>';break;case'createLabel':createElement='<label>New Label</label>';break;case'createField':createElement='<input type="text" />';break;case'createCheckbox':createElement='<div id="checkbox" class="checkbox" data="Checkbox"><input type="checkbox" /><label>Checkbox</label></div>';break;case'createMultipleChoice':createElement='<div id="multiple_choice" class="multiple_choice" data="MultipleChoice"><span><input type="radio" name="multiple_choice1" />Choice1</span><span><input type="radio"  name="multiple_choice1"/>Choice2</span><span><input type="radio"  name="multiple_choice1"/>Choice3</span></div>';break;case'createMailField':createElement='<input type="email" />';break;case'createTextarea':createElement='<textarea></textarea>';break;case'createSubmit':createElement='<input type="submit" value="Submit" />';break;case'createImg':createElement='<img class="image" src="#" alt="Image" />';break;case'createMap':createElement='<img class="map" src="http://maps.googleapis.com/maps/api/staticmap?center=London&zoom=10&size=250x250&maptype=terrain&sensor=false" title="gmap" />';break;case'createCaptcha':createElement='<img class="captcha" src="'+CPD.baseurl+'css/img/captcha.png'+'" title="gmap" />';break;case'createSelect':createElement='<select><option>Select</option></select>';break;case'createAddress':createElement=CPD.htmlAddress();break;case'createFacebook':createElement='<div id="facebook" class="facebook" data="CreateFaceBook" value="http://www.facebook.com/pages/ContactPageDesigner/305479262862470"></div>';break;case'createTwitter':createElement='<div id="Twitter" class="Twitter" data="CreateTwitter" value="ContactPage"></div>';break}var elementTools=jQuery('#elementTools').html();jQuery('<li>'+elementTools+createElement+'</li>').css({position:'absolute',top:y,left:x,cursor:'pointer'}).appendTo('.Workflow_Wrapper ul');CPD.ETI(jQuery('.Workflow_Wrapper ul li:last > .elementTools'))}})}this.ETI=function(th){th.parent('li').click(function(e){e.stopPropagation();jQuery('.Workflow_Wrapper ul li .elementTools').hide();jQuery(this).find('.elementTools').show()});th.parent('li').mouseover(function(e){e.stopPropagation();if(!CPD.isElementMove){jQuery(this).find('.elementTools').show();jQuery(this).css('z-index','10000')}});th.parent('li').mouseout(function(e){e.stopPropagation();if(!CPD.isElementMove){jQuery(this).find('.elementTools').hide();jQuery(this).css('z-index','0')}});th.parents('li').draggable({containment:'.Workflow_Wrapper ul',snap:true,snapTolerance:5,handle:'.elementTools .move',grid:[5,5],start:function(event,ui){CPD.isElementMove=true},stop:function(event,ui){CPD.isElementMove=false}});th.find('.delete').click(function(){jQuery(th).parents('li').remove()});th.find('.edit').click(function(){CPD.editElement(th.next())})}this.showEditor=function(element){jQuery('.BlackBox').show();jQuery('.ElementEditor > div').hide();jQuery('.ElementEditor').show();jQuery('.ElementEditor .'+element).show();jQuery('.ElementEditor > h4').show();jQuery('.ElementEditor').css({left:jQuery(window).outerWidth()/2-jQuery('.ElementEditor').outerWidth()/2,top:jQuery(window).outerHeight()/2-jQuery('.ElementEditor').outerHeight()/2})}this.editElement=function(th){var elementType=(th.get(0).tagName);var param;switch(elementType){case"IMG":if(jQuery(th).attr('class')=='captcha'){jQuery('.ElementEditor > h4').text('Captcha Settings');this.showEditor('EditCaptcha');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);jQuery('.ElementEditor .EditCaptcha input[name=left]').val(param.Left);jQuery('.ElementEditor .EditCaptcha input[name=top]').val(param.Top);jQuery('.ElementEditor .EditCaptcha input[type=button]').unbind('click').click(function(){jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditCaptcha input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditCaptcha input[name=top]').val())});jQuery('.BlackBox').trigger('click')})}if(jQuery(th).attr('class')=='map'){jQuery('.ElementEditor > h4').text('Map Settings');this.showEditor('EditMap');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.outerWidth=Math.round(jQuery(th).outerWidth());param.outerHeight=Math.round(jQuery(th).outerHeight());jQuery('.ElementEditor .EditMap input[name=left]').val(param.Left);jQuery('.ElementEditor .EditMap input[name=top]').val(param.Top);jQuery('.ElementEditor .EditMap input[name=width]').val(param.outerWidth);jQuery('.ElementEditor .EditMap input[name=height]').val(param.outerHeight);CPD.makeSlider('.ElementEditor .EditMap .outerWidthSlider','.ElementEditor .EditMap input[name=width]');CPD.makeSlider('.ElementEditor .EditMap .outerHeightSlider','.ElementEditor .EditMap input[name=height]');jQuery('.ElementEditor .EditMap input[type=button]').unbind('click').click(function(){jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditMap input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditMap input[name=top]').val())});jQuery(th).attr('src','http://maps.googleapis.com/maps/api/staticmap?center='+jQuery('.ElementEditor .EditMap input[name=location]').val()+'&zoom='+jQuery('.ElementEditor .EditMap select.zoom').val()+'&size='+jQuery('.ElementEditor .EditMap input[name=width]').val()+'x'+jQuery('.ElementEditor .EditMap input[name=height]').val()+'&maptype='+jQuery('.ElementEditor .EditMap select.MapType').val()+'&sensor=false');jQuery('.BlackBox').trigger('click')})}if(jQuery(th).attr('class')=='image'){jQuery('.ElementEditor > h4').text('Image Settings');this.showEditor('EditImg');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.outerWidth=Math.round(jQuery(th).outerWidth());param.outerHeight=Math.round(jQuery(th).outerHeight());param.Source=jQuery(th).attr('src');jQuery('.ElementEditor .EditImg input[name=left]').val(param.Left);jQuery('.ElementEditor .EditImg input[name=top]').val(param.Top);jQuery('.ElementEditor .EditImg input[name=width]').val(param.outerWidth);jQuery('.ElementEditor .EditImg input[name=height]').val(param.outerHeight);jQuery('.ElementEditor .EditImg input[name=Source]').val(param.Source);CPD.makeSlider('.ElementEditor .EditImg .outerWidthSlider','.ElementEditor .EditImg input[name=width]');CPD.makeSlider('.ElementEditor .EditImg .outerHeightSlider','.ElementEditor .EditImg input[name=height]');jQuery('.ElementEditor .EditImg input[type=button]').unbind('click').click(function(){jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditImg input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditImg input[name=top]').val())});jQuery(th).css({width:jQuery('.ElementEditor .EditImg input[name=width]').val(),height:jQuery('.ElementEditor .EditImg input[name=height]').val()});jQuery(th).attr('src',jQuery('.ElementEditor .EditImg input[name=Source]').val());jQuery('.BlackBox').trigger('click')})}break;case"P":jQuery('.ElementEditor > h4').text('Paragraph Settings');this.showEditor('EditParagraph');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.Text=jQuery(th).text();param.outerWidth=Math.round(jQuery(th).outerWidth());param.Color=jQuery(th).css('color');param.FontSize=jQuery(th).css('font-size').replace('px','');param.Align=jQuery(th).css('text-align');param.Transform=jQuery(th).css('text-transform');jQuery('.ElementEditor .EditParagraph input[name=left]').val(param.Left);jQuery('.ElementEditor .EditParagraph input[name=top]').val(param.Top);jQuery('.ElementEditor .EditParagraph input[name=width]').val(param.outerWidth);jQuery('.ElementEditor .EditParagraph input[name=color]').val(param.Color);jQuery('.ElementEditor .EditParagraph input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditParagraph textarea[name=text]').val(param.Text);jQuery('.ElementEditor .EditParagraph select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditParagraph select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditParagraph select.FontWeight option').removeAttr('selected');jQuery('.ElementEditor .EditParagraph select.FontWeight option[value="'+param.fontWeight+'"]').attr('selected','selected');jQuery('.ElementEditor .EditParagraph select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditParagraph select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditParagraph select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditParagraph select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');CPD.makeSlider('.ElementEditor .EditParagraph .outerWidthSlider','.ElementEditor .EditParagraph input[name=width]');CPD.makeSlider('.ElementEditor .EditParagraph .fontSlider','.ElementEditor .EditParagraph input[name=font-size]');jQuery('.ElementEditor .EditParagraph input[type=button]').unbind('click').click(function(){jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditParagraph input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditParagraph input[name=top]').val())});jQuery(th).css({width:jQuery('.ElementEditor .EditParagraph input[name=width]').val(),color:jQuery('.ElementEditor .EditParagraph input[name=color]').val(),fontFamily:jQuery('.ElementEditor .EditParagraph select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditParagraph select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditParagraph select.Alignment').val(),textTransform:jQuery('.ElementEditor .EditParagraph select.Transform').val(),fontSize:jQuery('.ElementEditor .EditParagraph input[name=font-size]').val()+'px'});jQuery(th).text(jQuery('.ElementEditor .EditParagraph textarea[name=text]').val());jQuery('.BlackBox').trigger('click')});break;case"LABEL":jQuery('.ElementEditor > h4').text('Label Settings');this.showEditor('EditLabel');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.Text=jQuery(th).text();param.Color=jQuery(th).css('color');param.FontSize=jQuery(th).css('font-size').replace('px','');param.Align=jQuery(th).css('text-align');param.Transform=jQuery(th).css('text-transform');jQuery('.ElementEditor .EditLabel input[name=left]').val(param.Left);jQuery('.ElementEditor .EditLabel input[name=top]').val(param.Top);jQuery('.ElementEditor .EditLabel input[name=color]').val(param.Color);jQuery('.ElementEditor .EditLabel input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditLabel textarea[name=text]').val(param.Text);jQuery('.ElementEditor .EditLabel select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditLabel select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditLabel select.FontWeight option').removeAttr('selected');jQuery('.ElementEditor .EditLabel select.FontWeight option[value="'+param.fontWeight+'"]').attr('selected','selected');jQuery('.ElementEditor .EditLabel select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditLabel select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditLabel select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditLabel select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');CPD.makeSlider('.ElementEditor .EditLabel .fontSlider','.ElementEditor .EditLabel input[name=font-size]');jQuery('.ElementEditor .EditLabel input[type=button]').unbind('click').click(function(){jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditLabel input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditLabel input[name=top]').val())});jQuery(th).css({color:jQuery('.ElementEditor .EditLabel input[name=color]').val(),fontFamily:jQuery('.ElementEditor .EditLabel select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditLabel select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditLabel select.Alignment').val(),textTransform:jQuery('.ElementEditor .EditLabel select.Transform').val(),fontSize:jQuery('.ElementEditor .EditLabel input[name=font-size]').val()+'px'});jQuery(th).text(jQuery('.ElementEditor .EditLabel textarea[name=text]').val());jQuery('.BlackBox').trigger('click')});break;case"INPUT":switch(th.attr('type')){case'email':jQuery('.ElementEditor > h4').text('Email Field Settings');CPD.showEditor('EditEmailField');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.Text=jQuery(th).text();param.width=Math.round(jQuery(th).width());param.height=Math.round(jQuery(th).height());param.Color=jQuery(th).css('color');param.bgColor=jQuery(th).css('backgroundColor');param.FontSize=jQuery(th).css('font-size').replace('px','');param.Align=jQuery(th).css('text-align');param.Transform=jQuery(th).css('text-transform');param.brColor=jQuery(th).css('border-left-color');param.Name=jQuery(th).attr('name');param.Required=jQuery(th).attr('class')=='required'?true:false;jQuery('.ElementEditor .EditEmailField input.required').prop("checked",param.Required);jQuery('.ElementEditor .EditEmailField input.name').val(param.Name);jQuery('.ElementEditor .EditEmailField input[name=left]').val(param.Left);jQuery('.ElementEditor .EditEmailField input[name=top]').val(param.Top);jQuery('.ElementEditor .EditEmailField input[name=width]').val(param.width);jQuery('.ElementEditor .EditEmailField input[name=height]').val(param.height);jQuery('.ElementEditor .EditEmailField input[name=color]').val(param.Color);jQuery('.ElementEditor .EditEmailField input[name=bgcolor]').val(param.bgColor);jQuery('.ElementEditor .EditEmailField input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditEmailField textarea[name=text]').val(param.Text);jQuery('.ElementEditor .EditEmailField input[name=brcolor]').val(param.brColor);jQuery('.ElementEditor .EditEmailField .placeholder').val(jQuery(th).attr('placeholder'));jQuery('.ElementEditor .EditEmailField select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditEmailField select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditEmailField select.FontWeight option').removeAttr('selected');jQuery('.ElementEditor .EditEmailField select.FontWeight option[value="'+param.fontWeight+'"]').attr('selected','selected');jQuery('.ElementEditor .EditEmailField select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditEmailField select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditEmailField select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditEmailField select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');CPD.makeSlider('.ElementEditor .EditEmailField .outerWidthSlider','.ElementEditor .EditEmailField input[name=width]');CPD.makeSlider('.ElementEditor .EditEmailField .outerHeightSlider','.ElementEditor .EditEmailField input[name=height]');CPD.makeSlider('.ElementEditor .EditEmailField .fontSlider','.ElementEditor .EditEmailField input[name=font-size]');jQuery('.ElementEditor .EditEmailField input[type=button]').unbind('click').click(function(){var name=jQuery('.ElementEditor .EditEmailField input.name').val();if(name!=""&&jQuery('.CPD .Workflow_Wrapper ul li [name="'+name+'"]').not(th).length){alert('Name: '+name+' is reserved! Pick different name!');return false}jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditEmailField input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditEmailField input[name=top]').val())});jQuery(th).css({width:jQuery('.ElementEditor .EditEmailField input[name=width]').val(),height:jQuery('.ElementEditor .EditEmailField input[name=height]').val(),color:jQuery('.ElementEditor .EditEmailField input[name=color]').val(),backgroundColor:jQuery('.ElementEditor .EditEmailField input[name=bgcolor]').val(),fontFamily:jQuery('.ElementEditor .EditEmailField select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditEmailField select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditEmailField select.Alignment').val(),textTransform:jQuery('.ElementEditor .EditEmailField select.Transform').val(),fontSize:jQuery('.ElementEditor .EditEmailField input[name=font-size]').val()+'px',borderColor:jQuery('.ElementEditor .EditEmailField input[name=brcolor]').val()});if(jQuery('.ElementEditor .EditEmailField input.required').is(':checked')){jQuery(th).addClass('required');jQuery(th).parent().addClass('required')}else{jQuery(th).removeClass('required');jQuery(th).parent().removeClass('required')}jQuery(th).attr('name',name);jQuery(th).attr('placeholder',jQuery('.ElementEditor .EditEmailField .placeholder').val());jQuery(th).val(jQuery('.ElementEditor .EditEmailField textarea[name=text]').val());jQuery(th).text(jQuery('.ElementEditor .EditEmailField textarea[name=text]').val());jQuery('.BlackBox').trigger('click');return true});break;case'text':jQuery('.ElementEditor > h4').text('Input Settings');CPD.showEditor('EditInputText');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.Text=jQuery(th).text();param.width=Math.round(jQuery(th).width());param.height=Math.round(jQuery(th).height());param.Color=jQuery(th).css('color');param.bgColor=jQuery(th).css('backgroundColor');param.FontSize=jQuery(th).css('font-size').replace('px','');param.Align=jQuery(th).css('text-align');param.Transform=jQuery(th).css('text-transform');param.brColor=jQuery(th).css('border-left-color');param.Name=jQuery(th).attr('name');param.Required=jQuery(th).attr('class')=='required'?true:false;jQuery('.ElementEditor .EditInputText input.required').prop("checked",param.Required);jQuery('.ElementEditor .EditInputText input.name').val(param.Name);jQuery('.ElementEditor .EditInputText input[name=left]').val(param.Left);jQuery('.ElementEditor .EditInputText input[name=top]').val(param.Top);jQuery('.ElementEditor .EditInputText input[name=width]').val(param.width);jQuery('.ElementEditor .EditInputText input[name=height]').val(param.height);jQuery('.ElementEditor .EditInputText input[name=color]').val(param.Color);jQuery('.ElementEditor .EditInputText input[name=bgcolor]').val(param.bgColor);jQuery('.ElementEditor .EditInputText input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditInputText textarea[name=text]').val(param.Text);jQuery('.ElementEditor .EditInputText input[name=brcolor]').val(param.brColor);jQuery('.ElementEditor .EditInputText .placeholder').val(jQuery(th).attr('placeholder'));jQuery('.ElementEditor .EditInputText select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditInputText select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditInputText select.FontWeight option').removeAttr('selected');jQuery('.ElementEditor .EditInputText select.FontWeight option[value="'+param.fontWeight+'"]').attr('selected','selected');jQuery('.ElementEditor .EditInputText select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditInputText select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditInputText select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditInputText select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');CPD.makeSlider('.ElementEditor .EditInputText .outerWidthSlider','.ElementEditor .EditInputText input[name=width]');CPD.makeSlider('.ElementEditor .EditInputText .outerHeightSlider','.ElementEditor .EditInputText input[name=height]');CPD.makeSlider('.ElementEditor .EditInputText .fontSlider','.ElementEditor .EditInputText input[name=font-size]');jQuery('.ElementEditor .EditInputText input[type=button]').unbind('click').click(function(){var name=jQuery('.ElementEditor .EditInputText input.name').val();if(name!=""&&jQuery('.CPD .Workflow_Wrapper ul li [name="'+name+'"]').not(th).length){alert('Name: '+name+' is reserved! Pick different name!');return false}jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditInputText input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditInputText input[name=top]').val())});jQuery(th).css({width:jQuery('.ElementEditor .EditInputText input[name=width]').val(),height:jQuery('.ElementEditor .EditInputText input[name=height]').val(),color:jQuery('.ElementEditor .EditInputText input[name=color]').val(),backgroundColor:jQuery('.ElementEditor .EditInputText input[name=bgcolor]').val(),fontFamily:jQuery('.ElementEditor .EditInputText select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditInputText select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditInputText select.Alignment').val(),textTransform:jQuery('.ElementEditor .EditInputText select.Transform').val(),fontSize:jQuery('.ElementEditor .EditInputText input[name=font-size]').val()+'px',borderColor:jQuery('.ElementEditor .EditInputText input[name=brcolor]').val()});if(jQuery('.ElementEditor .EditInputText input.required').is(':checked')){jQuery(th).addClass('required');jQuery(th).parent().addClass('required')}else{jQuery(th).removeClass('required');jQuery(th).parent().removeClass('required')}jQuery(th).attr('name',name);jQuery(th).attr('placeholder',jQuery('.ElementEditor .EditInputText .placeholder').val());jQuery(th).val(jQuery('.ElementEditor .EditInputText textarea[name=text]').val());jQuery(th).text(jQuery('.ElementEditor .EditInputText textarea[name=text]').val());jQuery('.BlackBox').trigger('click');return true});break;case'submit':jQuery('.ElementEditor > h4').text('Submit Button Settings');CPD.showEditor('EditInputSubmit');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.Text=jQuery(th).val();param.width=Math.round(jQuery(th).width());param.height=Math.round(jQuery(th).height());param.Color=jQuery(th).css('color');param.bgColor=jQuery(th).css('backgroundColor');param.brColor=jQuery(th).css('border-left-color');param.FontSize=jQuery(th).css('font-size').replace('px','');param.Align=jQuery(th).css('text-align');param.Transform=jQuery(th).css('text-transform');jQuery('.ElementEditor .EditInputSubmit input[name=left]').val(param.Left);jQuery('.ElementEditor .EditInputSubmit input[name=top]').val(param.Top);jQuery('.ElementEditor .EditInputSubmit input[name=width]').val(param.width);jQuery('.ElementEditor .EditInputSubmit input[name=height]').val(param.height);jQuery('.ElementEditor .EditInputSubmit input[name=color]').val(param.Color);jQuery('.ElementEditor .EditInputSubmit input[name=bgcolor]').val(param.bgColor);jQuery('.ElementEditor .EditInputSubmit input[name=brcolor]').val(param.brColor);jQuery('.ElementEditor .EditInputSubmit input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditInputSubmit textarea[name=text]').val(param.Text);jQuery('.ElementEditor .EditInputSubmit select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditInputSubmit select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditInputSubmit select.FontWeight option').removeAttr('selected');jQuery('.ElementEditor .EditInputSubmit select.FontWeight option[value="'+param.fontWeight+'"]').attr('selected','selected');jQuery('.ElementEditor .EditInputSubmit select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditInputSubmit select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditInputSubmit select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditInputSubmit select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');CPD.makeSlider('.ElementEditor .EditInputSubmit .outerWidthSlider','.ElementEditor .EditInputSubmit input[name=width]');CPD.makeSlider('.ElementEditor .EditInputSubmit .outerHeightSlider','.ElementEditor .EditInputSubmit input[name=height]');CPD.makeSlider('.ElementEditor .EditInputSubmit .fontSlider','.ElementEditor .EditInputSubmit input[name=font-size]');jQuery('.ElementEditor .EditInputSubmit input[type=button]').unbind('click').click(function(){jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditInputSubmit input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditInputSubmit input[name=top]').val())});jQuery(th).css({width:Math.round(jQuery('.ElementEditor .EditInputSubmit input[name=width]').val()),height:Math.round(jQuery('.ElementEditor .EditInputSubmit input[name=height]').val()),color:jQuery('.ElementEditor .EditInputSubmit input[name=color]').val(),backgroundColor:jQuery('.ElementEditor .EditInputSubmit input[name=bgcolor]').val(),borderColor:jQuery('.ElementEditor .EditInputSubmit input[name=brcolor]').val(),fontFamily:jQuery('.ElementEditor .EditInputSubmit select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditInputSubmit select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditInputSubmit select.Alignment').val(),textTransform:jQuery('.ElementEditor .EditInputSubmit select.Transform').val(),fontSize:jQuery('.ElementEditor .EditInputSubmit input[name=font-size]').val()+'px',lineHeight:jQuery('.ElementEditor .EditInputSubmit input[name=height]').val()+'px'});jQuery(th).val(jQuery('.ElementEditor .EditInputSubmit textarea[name=text]').val());jQuery(th).text(jQuery('.ElementEditor .EditInputSubmit textarea[name=text]').val());jQuery('.BlackBox').trigger('click')});break}break;case"TEXTAREA":jQuery('.ElementEditor > h4').text('Text Area Settings');CPD.showEditor('EditTextarea');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.Text=jQuery(th).text();param.width=Math.round(jQuery(th).width());param.height=Math.round(jQuery(th).height());param.Color=jQuery(th).css('color');param.bgColor=jQuery(th).css('backgroundColor');param.brColor=jQuery(th).css('border-left-color');param.FontSize=jQuery(th).css('font-size').replace('px','');param.Align=jQuery(th).css('text-align');param.Transform=jQuery(th).css('text-transform');param.Name=jQuery(th).attr('name');param.Required=jQuery(th).attr('class')=='required'?true:false;jQuery('.ElementEditor .EditTextarea input.required').prop("checked",param.Required);jQuery('.ElementEditor .EditTextarea input.name').val(param.Name);jQuery('.ElementEditor .EditTextarea input[name=left]').val(param.Left);jQuery('.ElementEditor .EditTextarea input[name=top]').val(param.Top);jQuery('.ElementEditor .EditTextarea input[name=width]').val(param.width);jQuery('.ElementEditor .EditTextarea input[name=height]').val(param.height);jQuery('.ElementEditor .EditTextarea input[name=color]').val(param.Color);jQuery('.ElementEditor .EditTextarea input[name=bgcolor]').val(param.bgColor);jQuery('.ElementEditor .EditTextarea input[name=brcolor]').val(param.brColor);jQuery('.ElementEditor .EditTextarea input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditTextarea textarea[name=text]').val(param.Text);jQuery('.ElementEditor .EditTextarea .placeholder').val(jQuery(th).attr('placeholder'));jQuery('.ElementEditor .EditTextarea select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditTextarea select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditTextarea select.FontWeight option').removeAttr('selected');jQuery('.ElementEditor .EditTextarea select.FontWeight option[value="'+param.fontWeight+'"]').attr('selected','selected');jQuery('.ElementEditor .EditTextarea select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditTextarea select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditTextarea select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditTextarea select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');CPD.makeSlider('.ElementEditor .EditTextarea .outerWidthSlider','.ElementEditor .EditTextarea input[name=width]');CPD.makeSlider('.ElementEditor .EditTextarea .outerHeightSlider','.ElementEditor .EditTextarea input[name=height]');CPD.makeSlider('.ElementEditor .EditTextarea .fontSlider','.ElementEditor .EditTextarea input[name=font-size]');jQuery('.ElementEditor .EditTextarea input[type=button]').unbind('click').click(function(){var name=jQuery('.ElementEditor .EditTextarea input.name').val();if(name!=""&&jQuery('.CPD .Workflow_Wrapper ul li [name="'+name+'"]').not(th).length){alert('Name: '+name+' is reserved! Pick different name!');return false}jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditTextarea input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditTextarea input[name=top]').val())});jQuery(th).css({width:jQuery('.ElementEditor .EditTextarea input[name=width]').val(),height:jQuery('.ElementEditor .EditTextarea input[name=height]').val(),color:jQuery('.ElementEditor .EditTextarea input[name=color]').val(),backgroundColor:jQuery('.ElementEditor .EditTextarea input[name=bgcolor]').val(),borderColor:jQuery('.ElementEditor .EditTextarea input[name=brcolor]').val(),fontFamily:jQuery('.ElementEditor .EditTextarea select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditTextarea select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditTextarea select.Alignment').val(),textTransform:jQuery('.ElementEditor .EditTextarea select.Transform').val(),fontSize:jQuery('.ElementEditor .EditTextarea input[name=font-size]').val()+'px'});if(jQuery('.ElementEditor .EditTextarea input.required').is(':checked')){jQuery(th).addClass('required');jQuery(th).parent().addClass('required')}else{jQuery(th).removeClass('required');jQuery(th).parent().removeClass('required')}jQuery(th).attr('name',name);jQuery(th).attr('placeholder',jQuery('.ElementEditor .EditTextarea .placeholder').val());jQuery(th).val(jQuery('.ElementEditor .EditTextarea textarea[name=text]').val());jQuery(th).text(jQuery('.ElementEditor .EditTextarea textarea[name=text]').val());jQuery('.BlackBox').trigger('click');return true});break;case"SELECT":jQuery('.ElementEditor > h4').text('Select Settings');FieldWidth=jQuery('.ElementEditor .EditSelect input[name=width]');FieldHeight=jQuery('.ElementEditor .EditSelect input[name=height]');CPD.makeSlider('.ElementEditor .EditSelect .outerWidthSlider','.ElementEditor .EditSelect input[name=width]');CPD.makeSlider('.ElementEditor .EditSelect .outerHeightSlider','.ElementEditor .EditSelect input[name=height]');this.showEditor('EditSelect');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.outerWidth=Math.round(jQuery(th).outerWidth());param.outerHeight=Math.round(jQuery(th).outerHeight());param.Color=jQuery(th).css('color');param.bgColor=jQuery(th).css('backgroundColor');param.FontSize=jQuery(th).css('font-size').replace('px','');param.Align=jQuery(th).css('text-align');param.Transform=jQuery(th).css('text-transform');param.brColor=jQuery(th).css('border-left-color');param.Name=jQuery(th).attr('name');param.Required=jQuery(th).attr('class')=='required'?true:false;param.Text=jQuery(th).html();jQuery('.ElementEditor .EditSelect input.required').prop("checked",param.Required);jQuery('.ElementEditor .EditSelect input.name').val(param.Name);jQuery('.ElementEditor .EditSelect input[name=left]').val(param.Left);jQuery('.ElementEditor .EditSelect input[name=top]').val(param.Top);jQuery('.ElementEditor .EditSelect input[name=width]').val(param.outerWidth+2);jQuery('.ElementEditor .EditSelect input[name=height]').val(param.outerHeight+2);jQuery('.ElementEditor .EditSelect input[name=color]').val(param.Color);jQuery('.ElementEditor .EditSelect input[name=bgcolor]').val(param.bgColor);jQuery('.ElementEditor .EditSelect input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditSelect input[name=brcolor]').val(param.brColor);jQuery('.ElementEditor .EditSelect select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditSelect select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditSelect select.FontWeight option').removeAttr('selected');jQuery('.ElementEditor .EditSelect select.FontWeight option[value="'+param.fontWeight+'"]').attr('selected','selected');jQuery('.ElementEditor .EditSelect select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditSelect select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditSelect select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditSelect select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');CPD.makeSlider('.ElementEditor .EditSelect .outerWidthSlider','.ElementEditor .EditSelect input[name=width]');CPD.makeSlider('.ElementEditor .EditSelect .outerHeightSlider','.ElementEditor .EditSelect input[name=height]');CPD.makeSlider('.ElementEditor .EditSelect .fontSlider','.ElementEditor .EditSelect input[name=font-size]');var valTextArea='';var splits=param.Text.split('</option>');for(var s=0;s<splits.length;s++){var el=splits[s];var strpos=el.indexOf('>');if(strpos!=-1){valTextArea+=el.substr(strpos+1,el.length);valTextArea+='\n'}}if(valTextArea!='Select'){jQuery('#dropdownOption').text(valTextArea)}jQuery('.ElementEditor .EditSelect input[type=button]').unbind('click').click(function(){var select=jQuery(th);var name=jQuery('.ElementEditor .EditSelect .name').val();jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditSelect input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditSelect input[name=top]').val())});jQuery(th).css({width:Number(jQuery('.ElementEditor .EditSelect input[name=width]').val()),height:Number(jQuery('.ElementEditor .EditSelect input[name=height]').val()),color:jQuery('.ElementEditor .EditSelect input[name=color]').val(),backgroundColor:jQuery('.ElementEditor .EditSelect input[name=bgcolor]').val(),fontFamily:jQuery('.ElementEditor .EditSelect select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditSelect select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditSelect select.Alignment').val(),textTransform:jQuery('.ElementEditor .EditSelect select.Transform').val(),fontSize:jQuery('.ElementEditor .EditSelect input[name=font-size]').val()+'px',borderColor:jQuery('.ElementEditor .EditSelect input[name=brcolor]').val()});if(jQuery('.ElementEditor .EditSelect input.required').is(':checked')){jQuery(th).addClass('required')}else{jQuery(th).removeClass('required')}select.attr('name',name);var op=jQuery('#dropdownOption').val();if(!op){return false}var html='';var splits=op.split('\n');for(i=0;i<splits.length;i++){if(splits[i]!=''){html+='<option value="'+splits[i]+'">'+splits[i]+'</option>'}}select.html(html);jQuery('.BlackBox').trigger('click')});break;case'DIV':var Divid=jQuery(th).attr('id');if(Divid=='AddressGenerate'){jQuery('.ElementEditor > h4').text('Address Settings');this.showEditor('EditAddress');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.Text=jQuery(th).text();param.FontSize=jQuery(th).css('font-size').replace('px','');param.Align=jQuery(th).css('text-align');param.Transform=jQuery(th).css('text-transform');param.Required=jQuery(th).hasClass('required')?true:false;param.Placeholder=jQuery(th).attr('title');jQuery('.ElementEditor .EditAddress input.required').prop("checked",param.Required);jQuery('.ElementEditor .EditAddress input[name=left]').val(param.Left);jQuery('.ElementEditor .EditAddress input[name=top]').val(param.Top);jQuery('.ElementEditor .EditAddress input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditAddress input[name=font-size]').addClass(param.FontSize);jQuery('.ElementEditor .EditAddress select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditAddress select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditAddress select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditAddress select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditAddress select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditAddress select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');jQuery('.ElementEditor .EditAddress input[type=button]').unbind('click').click(function(){jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditAddress input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditAddress input[name=top]').val())});jQuery(th).css({fontFamily:jQuery('.ElementEditor .EditAddress select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditAddress select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditAddress select.Alignment').val(),textTransform:jQuery('.ElementEditor .EditAddress select.Transform').val(),fontSize:jQuery('.ElementEditor .EditAddress input[name=font-size]').val()+'px'});CPD.UpdateChildren("#AddressGenerate",'fontSize',jQuery('.ElementEditor .EditAddress input[name=font-size]'));if(jQuery('.ElementEditor .EditAddress input.required').is(':checked')){jQuery(th).addClass('required')}else{jQuery(th).removeClass('required')}var html='';var op=jQuery('.CountryEditAddress-choise').val();var splits=op.split('\n');for(i=0;i<splits.length;i++){if(splits[i]!=''){html+='<option value="'+splits[i]+'">'+splits[i]+'</option>'}}jQuery(th).attr('data','addressModified');jQuery(th).attr('value',jQuery('.CountryAddressSelect').val());jQuery('#CountryAddress').html(html);jQuery('.BlackBox').trigger('click')})}else if(Divid=='facebook'){jQuery('.ElementEditor > h4').text('Facebook Settings');this.showEditor('FacebookSettings');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.value=jQuery(th).attr('value');jQuery('.ElementEditor .FacebookSettings input[name=left]').val(param.Left);jQuery('.ElementEditor .FacebookSettings input[name=top]').val(param.Top);jQuery('.ElementEditor .FacebookSettings .Facebooktolike').val(param.value);jQuery('.ElementEditor .FacebookSettings input[type=button]').unbind('click').click(function(){var facebookVal=jQuery('.ElementEditor .FacebookSettings .Facebooktolike').val();jQuery(th).attr('value',facebookVal);jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .FacebookSettings input[name=left]').val()),top:Number(jQuery('.ElementEditor .FacebookSettings input[name=top]').val())});jQuery('.BlackBox').trigger('click')})}else if(Divid=='Twitter'){jQuery('.ElementEditor > h4').text('Twitter Settings');this.showEditor('twitterSettings');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.value=jQuery(th).attr('value');jQuery('.ElementEditor .twitterSettings input[name=left]').val(param.Left);jQuery('.ElementEditor .twitterSettings input[name=top]').val(param.Top);jQuery('.ElementEditor .twitterSettings .TwitterAccount').val(param.value);jQuery('.ElementEditor .twitterSettings input[type=button]').unbind('click').click(function(){var tw=jQuery(th);var TwitterAccount=jQuery('.ElementEditor .twitterSettings .TwitterAccount').val();tw.attr('value',TwitterAccount)jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .twitterSettings input[name=left]').val()),top:Number(jQuery('.ElementEditor .twitterSettings input[name=top]').val())});jQuery('.BlackBox').trigger('click')})}else if(Divid=='multiple_choice'){jQuery('.ElementEditor > h4').text('Multiple Choice Settings');FieldWidth=jQuery('.ElementEditor .EditMultipleChoice input[name=width]');FieldHeight=jQuery('.ElementEditor .EditMultipleChoice input[name=height]');CPD.makeSlider('.ElementEditor .EditMultipleChoice .outerWidthSlider','.ElementEditor .EditMultipleChoice input[name=width]');CPD.makeSlider('.ElementEditor .EditMultipleChoice .outerHeightSlider','.ElementEditor .EditMultipleChoice input[name=height]');this.showEditor('EditMultipleChoice');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.Color=jQuery(th).css('color');param.bgColor=jQuery(th).css('backgroundColor');param.FontSize=jQuery(th).css('font-size').replace('px','');param.Align=jQuery(th).css('text-align');param.Transform=jQuery(th).css('text-transform');param.brColor=jQuery(th).css('border-left-color');param.Name=jQuery(th).attr('name');param.Required=jQuery(th).attr('class')=='required'?true:false;param.Text=jQuery(th).html();jQuery('.ElementEditor .EditMultipleChoice input.required').prop("checked",param.Required);jQuery('.ElementEditor .EditMultipleChoice input.name').val(param.Name);jQuery('.ElementEditor .EditMultipleChoice input[name=left]').val(param.Left);jQuery('.ElementEditor .EditMultipleChoice input[name=top]').val(param.Top);jQuery('.ElementEditor .EditMultipleChoice input[name=color]').val(param.Color);jQuery('.ElementEditor .EditMultipleChoice input[name=bgcolor]').val(param.bgColor);jQuery('.ElementEditor .EditMultipleChoice input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditMultipleChoice input[name=brcolor]').val(param.brColor);jQuery('.ElementEditor .EditMultipleChoice select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditMultipleChoice select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditMultipleChoice select.FontWeight option').removeAttr('selected');jQuery('.ElementEditor .EditMultipleChoice select.FontWeight option[value="'+param.fontWeight+'"]').attr('selected','selected');jQuery('.ElementEditor .EditMultipleChoice select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditMultipleChoice select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditMultipleChoice select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditMultipleChoice select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');CPD.makeSlider('.ElementEditor .EditMultipleChoice .outerWidthSlider','.ElementEditor .EditMultipleChoice input[name=width]');CPD.makeSlider('.ElementEditor .EditMultipleChoice .outerHeightSlider','.ElementEditor .EditMultipleChoice input[name=height]');CPD.makeSlider('.ElementEditor .EditMultipleChoice .fontSlider','.ElementEditor .EditMultipleChoice input[name=font-size]');var valTextArea='';jQuery(th).find('span').each(function(){valTextArea+=jQuery(this).text()+'\n'});jQuery('.ElementEditor .EditMultipleChoice #choices').text(valTextArea);jQuery('.ElementEditor .EditMultipleChoice input[type=button]').unbind('click').click(function(){var select=jQuery(th);var name=jQuery('.ElementEditor .EditMultipleChoice .name').val();jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditMultipleChoice input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditMultipleChoice input[name=top]').val())});jQuery(th).css({color:jQuery('.ElementEditor .EditMultipleChoice input[name=color]').val(),backgroundColor:jQuery('.ElementEditor .EditMultipleChoice input[name=bgcolor]').val(),fontFamily:jQuery('.ElementEditor .EditMultipleChoice select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditMultipleChoice select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditMultipleChoice select.Alignment').val(),textTransform:jQuery('.ElementEditor .EditMultipleChoice select.Transform').val(),fontSize:jQuery('.ElementEditor .EditMultipleChoice input[name=font-size]').val()+'px',borderColor:jQuery('.ElementEditor .EditMultipleChoice input[name=brcolor]').val()});if(jQuery('.ElementEditor .EditMultipleChoice input.required').is(':checked')){jQuery(th).addClass('required')}else{jQuery(th).removeClass('required')}select.attr('name',name);var op=jQuery('.ElementEditor .EditMultipleChoice #choices').val();if(!op){return false}var html=[];var splits=op.split('\n');for(i=0;i<splits.length;i++){if(splits[i]!=''){html.push('<span>');html.push('<input type="radio" name="',name,'" value="',splits[i],'" />');html.push(splits[i],'</span>')}}select.html(html.join(''));select.attr('data','MultipleChoice');jQuery('.BlackBox').trigger('click')})}else if(Divid=='checkbox'){jQuery('.ElementEditor > h4').text('Checkbox Settings');this.showEditor('EditCheckbox');param=new Array();param.Left=Math.round(jQuery(th).parents('li').position().left);param.Top=Math.round(jQuery(th).parents('li').position().top);param.Font=jQuery(th).css('font-family');param.fontWeight=jQuery(th).css('font-weight');param.Text=jQuery(th).text();param.outerWidth=Math.round(jQuery(th).outerWidth());param.outerHeight=Math.round(jQuery(th).outerHeight());param.Color=jQuery(th).css('color');param.bgColor=jQuery(th).css('backgroundColor');param.FontSize=jQuery(th).css('font-size').replace('px','');param.Transform=jQuery(th).css('text-transform');param.brColor=jQuery(th).css('border-left-color');param.Name=jQuery(th).attr('name');jQuery('.ElementEditor .EditCheckbox input.name').val(param.Name);jQuery('.ElementEditor .EditCheckbox input[name=left]').val(param.Left);jQuery('.ElementEditor .EditCheckbox input[name=top]').val(param.Top);jQuery('.ElementEditor .EditCheckbox input[name=width]').val(param.outerWidth);jQuery('.ElementEditor .EditCheckbox input[name=height]').val(param.outerHeight);jQuery('.ElementEditor .EditCheckbox input[name=color]').val(param.Color);jQuery('.ElementEditor .EditCheckbox input[name=bgcolor]').val(param.bgColor);jQuery('.ElementEditor .EditCheckbox input[name=font-size]').val(param.FontSize);jQuery('.ElementEditor .EditCheckbox textarea[name=text]').val(param.Text);jQuery('.ElementEditor .EditCheckbox input[name=brcolor]').val(param.brColor);jQuery('.ElementEditor .EditCheckbox select.FontFamilies option').removeAttr('selected');jQuery('.ElementEditor .EditCheckbox select.FontFamilies option[value="'+param.Font+'"]').attr('selected','selected');jQuery('.ElementEditor .EditCheckbox select.FontWeight option').removeAttr('selected');jQuery('.ElementEditor .EditCheckbox select.FontWeight option[value="'+param.fontWeight+'"]').attr('selected','selected');jQuery('.ElementEditor .EditCheckbox select.Alignment option').removeAttr('selected');jQuery('.ElementEditor .EditCheckbox select.Alignment option[value="'+param.Align+'"]').attr('selected','selected');jQuery('.ElementEditor .EditCheckbox select.Transform option').removeAttr('selected');jQuery('.ElementEditor .EditCheckbox select.Transform option[value="'+param.Transform+'"]').attr('selected','selected');CPD.makeSlider('.ElementEditor .EditCheckbox .outerWidthSlider','.ElementEditor .EditCheckbox input[name=width]');CPD.makeSlider('.ElementEditor .EditCheckbox .outerHeightSlider','.ElementEditor .EditCheckbox input[name=height]');CPD.makeSlider('.ElementEditor .EditCheckbox .fontSlider','.ElementEditor .EditCheckbox input[name=font-size]');jQuery('.ElementEditor .EditCheckbox input[type=button]').unbind('click').click(function(){var name=jQuery('.ElementEditor .EditCheckbox input.name').val();if(name!=""&&jQuery('.CPD .Workflow_Wrapper ul li [name="'+name+'"]').not(th).length){alert('Name: '+name+' is reserved! Pick different name!');return false}jQuery(th).parent().css({left:Number(jQuery('.ElementEditor .EditCheckbox input[name=left]').val()),top:Number(jQuery('.ElementEditor .EditCheckbox input[name=top]').val())});jQuery(th).css({width:jQuery('.ElementEditor .EditCheckbox input[name=width]').val(),height:jQuery('.ElementEditor .EditCheckbox input[name=height]').val(),color:jQuery('.ElementEditor .EditCheckbox input[name=color]').val(),backgroundColor:jQuery('.ElementEditor .EditCheckbox input[name=bgcolor]').val(),fontFamily:jQuery('.ElementEditor .EditCheckbox select.FontFamilies').val(),fontWeight:jQuery('.ElementEditor .EditCheckbox select.FontWeight').val(),textAlign:jQuery('.ElementEditor .EditCheckbox select.Alignment').val(),fontSize:jQuery('.ElementEditor .EditCheckbox input[name=font-size]').val()+'px',borderColor:jQuery('.ElementEditor .EditCheckbox input[name=brcolor]').val()});jQuery(th).attr('name',name);jQuery(th).attr('data','Checkbox');jQuery(th).val(jQuery('.ElementEditor .EditCheckbox textarea[name=text]').val());jQuery(th).find('label').text(jQuery('.ElementEditor .EditCheckbox textarea[name=text]').val());jQuery('.BlackBox').trigger('click');return true})}break}jQuery('.ElementEditor > h4').html(jQuery('.ElementEditor > h4').html()+'<span title="close">Close</span>')}this.makeSlider=function(slider,element){if(jQuery(element).val()<0){jQuery(element).val(0)}jQuery(slider).slider({range:"min",min:0,max:jQuery(element).val()<=0?100:jQuery(element).val()*2,value:jQuery(element).val(),slide:function(event,ui){jQuery(element).val((ui.value))}});jQuery(element).unbind('change').change(function(){jQuery(slider).slider({max:jQuery(element).val()<=0?100:jQuery(element).val()*2,value:jQuery(element).val()<0?0:jQuery(element).val()})})}this.saveTemplate=function(){jQuery('.TemplateProperties h4 span').live('click',function(){jQuery('.BlackBox').trigger('click')});jQuery('#SaveTemplate').click(function(){jQuery('.BlackBox').show();jQuery('.TemplateProperties').css({left:jQuery(window).outerWidth()/2-jQuery('.TemplateProperties').outerWidth()/2,top:jQuery(window).outerHeight()/2-jQuery('.TemplateProperties').outerHeight()/2}).show()});jQuery('.TemplateProperties input[type=button]').click(function(){var elements={};elements['tmp_name']=jQuery('.CPD .TemplateProperties input[name=tmp_name]').val();if(jQuery.trim(elements['tmp_name'])==""){jQuery('.CPD .TemplateProperties input[name=tmp_name]').css({border:'1px solid #F00'});return false}var workflow_wrapper=jQuery('.CPD .Workflow_Wrapper');workflow_wrapper.css('width',workflow_wrapper.width());workflow_wrapper.css('height',workflow_wrapper.height());elements['tmp_css']=workflow_wrapper.attr('style');jQuery('.CPD .Workflow ul li').each(function(k){elements[k]={};var lastChild=jQuery(this).children(':last');if(lastChild.css('border-left-style')!='none'){}var tag=lastChild.get(0).tagName;if(tag=='SELECT'){elements[k]['text']=lastChild.html()}else{elements[k]['text']=lastChild.text()}if(tag=='DIV'){elements[k]['value']=lastChild.attr('value')}else{elements[k]['value']=lastChild.val()}elements[k]['param']='tag::'+lastChild.get(0).tagName+"||";elements[k]['param']+='src::'+lastChild.attr('src')+"||";elements[k]['param']+='class::'+lastChild.attr('class')+"||";elements[k]['param']+='data::'+lastChild.attr('data')+"||";elements[k]['param']+='type::'+lastChild.attr('type');if(lastChild.get(0).tagName=='INPUT'||lastChild.get(0).tagName=='TEXTAREA'||lastChild.get(0).tagName=="SELECT"){elements[k]['param']+='||placeholder::'+lastChild.attr('placeholder');var name=lastChild.attr('name');if(!name){name='field'+k+'_'+Math.floor(Math.random()*1000)}elements[k]['param']+='||name::'+name}if(tag=='DIV'){if(lastChild.attr('data')=='Checkbox')elements[k]['param']+='||name::'+lastChild.attr('name');else if(lastChild.attr('data')=='MultipleChoice'){elements[k]['param']+='||name::'+lastChild.find('input:last').attr('name');elements[k]['text']=lastChild.html()}}elements[k]['css']='left::'+Math.round(jQuery(this).position().left)+'px'+"||";elements[k]['css']+='top::'+Math.round(jQuery(this).position().top)+'px'+"||";elements[k]['css']+='width::'+Math.round(lastChild.width())+'px'+"||";elements[k]['css']+='height::'+Math.round(lastChild.height())+'px'+"||";elements[k]['css']+='color::'+lastChild.css('color')+"||";elements[k]['css']+='background-color::'+lastChild.css('backgroundColor')+"||";elements[k]['css']+='border::'+'1px '+lastChild.css('border-left-style')+' '+lastChild.css('border-left-color')+"||";elements[k]['css']+='font-family::'+lastChild.css('font-family')+"||";elements[k]['css']+='font-size::'+lastChild.css('font-size')+"||";elements[k]['css']+='font-weight::'+lastChild.css('font-weight')+"||";elements[k]['css']+='text-align::'+lastChild.css('text-align')+"||";elements[k]['css']+='text-transform::'+lastChild.css('text-transform')+"||";elements[k]['css']+='border-radius::'+lastChild.css('border-top-left-radius')});jQuery.ajax({type:'POST',async:true,url:CPD.ajaxUrl+'?action=cp_designer_save_template',data:elements,beforeSend:function(){},error:function(){alert('Error Saving Template!')},success:function(data){alert('Template Saved');jQuery('.BlackBox').trigger('click');jQuery('.CPD #Workflow_move_handle').text('Workflow (Current template: '+elements['tmp_name']+')');CPD.tmpname=elements['tmp_name']},dataType:'html'});return true})}this.selectTemplate=function(){jQuery('.SelectTemplate h4 span').click(function(){jQuery('.BlackBox').trigger('click')});jQuery('#selectTemplate').click(function(){jQuery('.BlackBox').show();jQuery.ajax({type:'POST',async:true,url:CPD.ajaxUrl+"?action=cp_designer_get_templates&format=xml",beforeSend:function(){jQuery('.SelectTemplate ul').empty()},error:function(){alert('Error Loading Template List')},success:function(data){jQuery(data).find('response template').each(function(){var tmp_id=jQuery(this).find('id').text();var tmp_name=jQuery(this).find('name').text();var tmp_act=jQuery(this).find('active').text();jQuery('<li onDblClick="if(confirm(\'Are you sure you want to delete this form?\')) return CPD.deleteForm('+tmp_id+'); else return false;" id="tmpid_'+tmp_id+'">'+tmp_name+'</li>').appendTo('.SelectTemplate ul')})},complete:function(){jQuery('.SelectTemplate').css({left:jQuery(window).outerWidth()/2-jQuery('.SelectTemplate').outerWidth()/2,top:jQuery(window).outerHeight()/2-jQuery('.SelectTemplate').outerHeight()/2}).show();jQuery('.SelectTemplate ul li').click(function(){var tmp_id=(jQuery(this).attr('id'));CPD.loadTemplateElements(tmp_id)})},dataType:'xml'})})}this.loadTemplateElements=function(tmp_id){var id=parseInt(tmp_id.replace('tmpid_',''),10);jQuery.ajax({type:'POST',async:true,url:CPD.ajaxUrl+"?action=cp_designer_get_template&format=xml",data:"tmpid="+id,beforeSend:function(){jQuery('.CPD .Workflow_Wrapper ul').empty()},error:function(){alert('Error Loading Template')},success:function(data){var name=jQuery(data).find('tmp_name').text();var css=jQuery(data).find('tmp_css').text();CPD.tmpname=name;jQuery('.CPD #Workflow_move_handle').text('Workflow (Current template: '+name+')');jQuery('.CPD .TemplateProperties input[name=tmp_name]').val(name);jQuery('.CPD .Workflow_Wrapper').attr('style',css);jQuery(data).find('element').each(function(){var el=jQuery(this).text();var elementTools=jQuery('#elementTools').html();jQuery(el).appendTo('.CPD .Workflow_Wrapper ul');jQuery(elementTools).prependTo('.CPD .Workflow_Wrapper ul li:last').children(':first');CPD.ETI(jQuery('.Workflow_Wrapper ul li:last > .elementTools'))})},dataType:'xml'})}this.makeDefault=function(){jQuery('#NewTemplate').click(function(){if(jQuery('.CPD .Workflow_Wrapper ul').html().length>0){if(!confirm('Your work will be lost. Will you continue?'))return}jQuery('.CPD .Workflow_Wrapper ul').html('');jQuery('.CPD .Workflow_Wrapper').width(600);jQuery('.CPD .Workflow_Wrapper').height(400);jQuery('.CPD .Workflow_Wrapper').removeAttr('style')})}this.editTemplate=function(){jQuery('#editTemplate').click(function(){jQuery('.ElementEditor > h4').text('Template Settings');CPD.showEditor('EditTemplate');var template=jQuery('.Workflow_Wrapper');param=new Array();param.outerWidth=Math.round(template.width());param.outerHeight=Math.round(template.height());param.color=template.css('color');param.backColor=template.css('background-color');param.backImage=template.css('background-image');param.backRepeat=template.css('background-repeat');if(param.backImage.indexOf('url(')==0)param.backImage=param.backImage.substring(4,param.backImage.length-1);if(param.backImage=='none')param.backImage='';jQuery('.ElementEditor .EditTemplate input[name=width]').val(param.outerWidth);jQuery('.ElementEditor .EditTemplate input[name=height]').val(param.outerHeight);jQuery('.ElementEditor .EditTemplate input[name=color]').val(param.color);jQuery('.ElementEditor .EditTemplate input[name=bgcolor]').val(param.backColor);jQuery('.ElementEditor .EditTemplate input[name=bgimage]').val(param.backImage);jQuery('.ElementEditor .EditTemplate select').val(param.backRepeat);jQuery('.ElementEditor .EditTemplate input[type=button]').unbind('click').click(function(){var backImage=jQuery('.ElementEditor .EditTemplate input[name=bgimage]').val();if(backImage!='')backImage='url('+jQuery('.ElementEditor .EditTemplate input[name=bgimage]').val()+')';else backImage='none';template.css({width:jQuery('.ElementEditor .EditTemplate input[name=width]').val(),height:jQuery('.ElementEditor .EditTemplate input[name=height]').val(),color:jQuery('.ElementEditor .EditTemplate input[name=color]').val(),backgroundColor:jQuery('.ElementEditor .EditTemplate input[name=bgcolor]').val(),backgroundImage:backImage,backgroundRepeat:jQuery('.ElementEditor .EditTemplate select').val()});console.log(jQuery('.ElementEditor .EditTemplate select').val());jQuery('.BlackBox').trigger('click')});jQuery('.ElementEditor > h4').html(jQuery('.ElementEditor > h4').html()+'<span title="close">Close</span>')})}this.htmlAddress=function(){var html='';html+='<div id="AddressGenerate" class="required" data="addressModified" value="world-states">';html+='<p>';html+='<label for="streetAddress">Street Address</label>';html+='<input value="" name="street_address" id="streetAddress" />';html+='</p>';html+='<p>';html+='<label for="streetAddress2">Address Line 2</label>';html+='<input value="" name="street_address2" id="streetAddress2" />';html+='</p>';html+='<p class="float_left w_50">';html+='<label for="cityAddress">City</label>';html+='<input value="" name="cityAddress" id="cityAddress" />';html+='</p>';html+='<p class="float_left w_50">';html+='<label for="zipCodeAddress">Postal / zipcode</label>';html+='<input value="" name="zipCodeAddress" id="zipCodeAddress" />';html+='</p>';html+='<p class="float_left w_50">';html+='<label for="regionAddress">State/Province/Region</label>';html+='<input value="" name="regionAddress" id="regionAddress" />';html+='</p>';html+='<p class="float_left w_50">';html+='<label for="CountryAddress">Country</label>';html+='<select name="CountryAddress" id="CountryAddress" ></select>';html+='</p>';html+='</div>';return html}this.SelectCountrySeparate=function(value){var boxArs=jQuery.trim(jQuery(".CountryType_"+value).html());var sp=boxArs.split(',');var html='';for(var i=0;i<sp.length;i++){html+=sp[i]+'\n'}jQuery('.CountryEditAddress-choise').html(html)}this.deleteForm=function(form){jQuery.ajax({type:'POST',async:false,url:CPD.ajaxUrl+"?action=cp_designer_delete_template&format=raw",data:{form:form},beforeSend:function(){},error:function(){alert('Error deleting Template!')},success:function(){jQuery('#tmpid_'+form).fadeOut('slow',function(){jQuery('#tmpid_'+form).remove()})}})}this.UpdateChildren=function(ob,CssName,value){var obj=jQuery(ob).children('p').children('label');for(var i=0;i<obj.length;i++){var el=jQuery(obj[i]);if(CssName=='fontSize'){el.css('fontSize',value.val()+'px')}if(CssName=='fontWeight'){el.css('fontWeight',value.val())}}jQuery(ob).removeClass(CssName+'__'+value.attr('class'));jQuery(ob).addClass(CssName+'__'+value.val());value.attr('class',value.val())}this.ShowImportMenu=function(){var box=jQuery('.selectChoiseDropDown');if(box.is(":visible")){box.fadeOut('slow');return false}else{box.fadeIn('slow');return false}}this.importchoices=function(choise){var boxArs=jQuery.trim(jQuery(".importChoise_"+choise).html());var sp=boxArs.split(',');var html='';for(var i=0;i<sp.length;i++){html+=sp[i]+'\n'}jQuery('#dropdownOption').html(html)}}